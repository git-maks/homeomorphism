<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Homeomorphism Checker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.23.0/cytoscape.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
        <span id="theme-icon">üåô</span>
        <span id="theme-text">Dark</span>
    </button>
    
    <button id="about-btn" class="about-btn" aria-label="About">
        <span>‚ÑπÔ∏è</span>
        <span>About</span>
    </button>
    
    <div class="header">
        <h1>Graph Homeomorphism Checker</h1>
        <p class="tutorial">Two graphs are homeomorphic if one can be transformed into the other by subdividing edges (adding degree-2 nodes along edges).</p>
    </div>
    
    <div class="instructions">
        <div class="instruction-pill">üñ±Ô∏è left-click to add node</div>
        <div class="instruction-pill">üóëÔ∏è right-click node to remove</div>
        <div class="instruction-pill">üîó click two nodes to connect</div>
        <div class="instruction-pill">‚Ü∂ ctrl+z undo | ctrl+y redo</div>
    </div>
    
    <div class="graph-section">
        <div class="graph-headers">
            <div class="graph-header-group">
                <h2 class="graph-label graph-a">Graph A</h2>
                <div class="graph-controls">
                    <button id="undo-btn" class="control-btn" title="Undo (Ctrl+Z)">‚Ü∂</button>
                    <button id="redo-btn" class="control-btn" title="Redo (Ctrl+Y)">‚Ü∑</button>
                </div>
            </div>
            <div class="graph-header-group">
                <h2 class="graph-label graph-b">Graph B</h2>
                <div class="graph-controls">
                    <button id="undo-btn2" class="control-btn" title="Undo">‚Ü∂</button>
                    <button id="redo-btn2" class="control-btn" title="Redo">‚Ü∑</button>
                </div>
            </div>
        </div>
        <div class="graph-containers">
            <div id="cy1" class="cytoscape-graph"></div>
            <div id="cy2" class="cytoscape-graph"></div>
        </div>
    </div>
    
    <div class="control-panel">
        <select class="example-dropdown" id="example-selector">
            <option value="">Load Example Graph...</option>
            <option value="triangle">Triangle vs Subdivided Triangle</option>
            <option value="star">Star Graphs (4-Star)</option>
            <option value="path">Path Graphs</option>
            <option value="complete">Complete Graph K3</option>
            <option value="non-homeo">Non-Homeomorphic (Tree vs Cycle)</option>
        </select>
        <button id="check-homeomorphism" class="btn" title="Check if the two graphs are homeomorphic">Check Homeomorphism</button>
        <button id="check-isomorphism" class="btn" title="Check if the two graphs are isomorphic">Check Isomorphism</button>
        <select class="example-dropdown" id="export-selector">
            <option value="">Export...</option>
            <option value="json-a" id="export-json-a">Export Graph A (JSON)</option>
            <option value="json-b" id="export-json-b">Export Graph B (JSON)</option>
            <option value="image" id="export-image">Export as Image (PNG)</option>
        </select>
    </div>
    
    <div id="result"></div>
    
    <!-- About Modal -->
    <div id="about-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" aria-label="Close modal">&times;</button>
            <h2>About</h2>
            
            <p>Interactive tool for checking graph homeomorphism and isomorphism. Draw graphs and see if they're topologically or structurally equivalent.</p>
            
            <div class="section-divider"></div>
            
            <h3>Algorithms</h3>
            
            <h4>Homeomorphism</h4>
            <p>Two graphs are homeomorphic if one can be transformed into the other by subdividing edges (adding degree-2 nodes). The algorithm removes all degree-2 nodes from both graphs, then checks if the simplified versions are isomorphic.</p>
            
            <h4>Isomorphism</h4>
            <p>Two graphs are isomorphic if there's a one-to-one mapping between nodes that preserves connections. The algorithm uses quick rejection tests (node count, edge count, degree sequence) followed by backtracking search for small graphs.</p>
            
            <div class="section-divider"></div>
            
            <h3>How to Use</h3>
            
            <ul>
                <li><strong>Add node:</strong> left-click empty space</li>
                <li><strong>Remove node:</strong> right-click on node</li>
                <li><strong>Create edge:</strong> click source node, then click target node</li>
                <li><strong>Undo/Redo:</strong> Ctrl+Z / Ctrl+Y or use buttons</li>
                <li><strong>Export:</strong> save graphs as JSON or PNG image</li>
            </ul>
            
            <div class="section-divider"></div>
            
            <h3>Tech</h3>
            <p>Built with vanilla JavaScript and Cytoscape.js for graph rendering.</p>
        </div>
    </div>
    
    <script>
        // handle export dropdown
        document.addEventListener('DOMContentLoaded', function() {
            const exportSelector = document.getElementById('export-selector');
            if (exportSelector) {
                exportSelector.addEventListener('change', function(e) {
                    const value = e.target.value;
                    if (value === 'json-a') {
                        document.getElementById('export-json-a').click();
                    } else if (value === 'json-b') {
                        document.getElementById('export-json-b').click();
                    } else if (value === 'image') {
                        document.getElementById('export-image').click();
                    }
                    e.target.value = '';
                });
            }
            
            // escape key to close modal
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const modal = document.getElementById('about-modal');
                    if (modal && modal.classList.contains('active')) {
                        modal.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                }
            });
        });
    </script>
    <script src="script.js"></script>
</body>
</html>
